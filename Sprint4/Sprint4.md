**Video Link:** https://www.youtube.com/watch?v=IoM_8MX-GHI

**Work completed for the frontend**
- Fixed issue with login where correct password would sometimes not navigate the user to the home page despite being logged in. 
- The signup button now correctly navigates to the login page if the user successfully signs up. 
- The log-out button navigates the user to the home page. 
- Wrote the front-page readme file for the frontend. 

-Renting System Creation:
-Files: Created two angular components, "string-array" and "rent"
-Each component has its own HTML, CSS, TypeScript, and Test Cases file
-String Array is used within the rent category to display an array of string to screen
-Renting system is connected to backend, which stores in a database the times at which a PC is available to rent
Renting system only allows an email to rent one PC per day (in a real life scenario, this would need to be a UFL email)

**List frontend tests**
- All old tests including loading test, original login test, and router link / navbar tests, both front-end unit and cypress tests
- signup navigates to login test: This test checks to see if the sign-up button navigates to the log-in page.
- settings navigates to home test: This test checks to see if the log-off button navigates to the home page.
- Renting: Three tests included for renting, one to ensure the form field exists, one to ensure that the form field properly accepts proper input and removes items from the backend array of string, and one to ensure improper input results in nothing being added

**BACKEND DOCUMENTATION**

Files:
- main - Contains all of the API endpoints and handles all of the routing.
- UserAccounts - Contains all of the structs and functions relating to user registration, login, and account modification
- ComputerEvents - Contains structs and functions relating to renting PCs

Structs:
- User - A gorm model struct which is used in the SQLite database to represent a user and their credentials. The primary key has been manually changed to be the user's email address.
- ComputerEvent - A gorm model struct used in the SQLite database to represent the available times a PC may be rented on a particular day.
- Env - A struct with a single field: a pointer to a gorm.DB instance. This exists so that we don't have to manually open the database in every function that needs it.

 Functions:

 UserAccounts:
    - getHash - A very simple function that passes in a []byte and returns the corresponding hash generated by bcrypt. Called by userLogin and userRegister.GenerateJWT - Returns a JSON web token (JWT) signed using HS256. Tokens are set to expire 24 hours after generation. Called by userLogin. test - Prints "Test success" when called. Called by the /api/test endpoint.
    - UserRegister - An Env struct behavior. Creates a new entry in the User table of the database provided that no other entry with the same email exists. Called by /api/signup endpoint.
    - UserLogin - An Env struct behavior. Compares hashes of the provided password string with the corresponding entry in the User table provided such an entry exists. If the hashes match, a JWT is returned along with a success message. Called by /api/login endpoint.
    - deactivateUser - An Env struct behavior. Deletes the user with provided email address from the User table provided they exist. This deletion is a hard delete using a raw SQL statement, hence the deletion is permanent. Called by /api/deactivate-account endpoint.
    - UpdateUser - An Env struct behavior. Updates the user's account information with the provided changes provided that the user exists in the User table. Does not update the email address. Called by /api/update-account endpoint.
    - checkUserExists - An Env struct behavior. Does pretty much what the name says. If the user exists, the passed in struct instance will be assigned to the user. Used primarily as a helper function to help increase code readability.
    - PasswordResetRequest - An Env struct behavior. Sends a password reset email to the specified user with a randomly generated verfication code. The verification code is stored in a field in the User struct. Called by /api/reset-pass.
    - PasswordResetConfirm - An Env struct behavior. Used to change a user's password after they have received a verification email. Called by /api/reset-confirmation.
    - UpdateUserName - An Env struct behavior. Used to update the first and last name fields of a user account. Not called on any route.
    - UpdateUserEmail - An Env struct behavior. Used to update the email address of a user account. Not called on any route.
    - sendVerification - Deprecated
    - SendEmail - Sends an email from the SPCB email to the specified email address with specified subject and body. Technically works, but Bill Gates blocked our email address because we violated TOS , so it doesn't actually work :(.
    - ChangeAdminState - An Env struct behavior. Does exactly as the name suggests. Admin state is a boolean value. Called by /api/change-admin-status.
    - AdminTest - An Env struct behavior. Used for testing the CheckAdminState middleware function. Called by /api/admin-test.

 ComputerEvents:
    - CheckEventExists - Same as checkUserExists but for ComputerEvents.
    - GetEventAvailability - An Env struct behavior. Returns a list of strings of the available times for the associated computer and time. Called by /api/get-event.
    - CreateEvent - An Env struct behavior. Creates a new event for a computer on a particular date. Called by /api/create-event.
    - UpdateEvent - An Env struct behavior. Updates the time fields for a ComputerEvent. Called by /api/update-event.
 
 **List of unit tests for backend**
- TestUserLogin: The unit test case tests the UserLogin() function in an Env struct using a mock environment that includes a SQLite database and a mock User       object. It creates an HTTP POST request to the login endpoint with the mock User object as the body and an HTTP response recorder to capture the response. Finally, it checks the status code, content type, and response body of the HTTP response to ensure that the function returns the expected result.
- TestUserRegister:This is a unit test that checks the userRegister() function's functionality in an Env struct. It creates a mock environment, including a SQLite database, and defines a mock User object with valid credentials. The test does this by sending an HTTP POST request to the register endpoint.
- TestDeactivateUser: This unit test case tests the functionality of deactivating a user in the application. The first test case checks that an existing user is deleted from the database, and the second test case checks that an error message is returned when attempting to delete a non-existent user.
- TestUpdateUser:in this unit test there are two test cases are performed: 1) updating an existing user should update the user in the database, and 2) updating a non-existent user should return an error message. The function creates a mock environment with an in-memory SQLite database, and uses the "Env" struct to call the "UpdateUser" function. The tests check that the user information is updated correctly and that the expected error messages are returned.
- TestUpdateUserInformation: This unit test case tests the functionality of updating a user's information through two HTTP endpoints, "update-username" and "update-email". It creates a test user and uses a mock HTTP request to call the corresponding functions for each endpoint, which update the user's information in the database. It then checks whether the user was updated correctly and whether the HTTP response code and message are as expected.
- TestUpdateUserEmail:This test case checks whether the "UpdateUserEmail" function properly handles the case where an invalid email is provided as the new email for a user. It creates a test user and uses a mock HTTP request to call the "UpdateUserEmail" function, passing an invalid email address in the request body. It then checks whether the HTTP response code is as expected.
- TestAdminTest: This test case checks whether the "AdminTest" function returns the expected HTTP response code. It creates a test user with admin privileges, creates a mock HTTP request, and calls the "AdminTest" function. The function simply returns a 200 HTTP status code, so the test case checks whether this code is returned.
- TestCheckAdminState:The test creates two requests, one with the "Admin" header set to "true" and another with it set to "false". It then calls the handler with each request and checks that the response status code and body are as expected. The test verifies that the middleware function correctly allows access for requests with the "Admin" header set to "true" and denies access for requests with it set to "false".
- TestCreateEvent: This test case tests the CreateEvent function of the Env struct. It creates a test instance of ComputerEvent, sends a POST request with the test instance as the request body to the CreateEvent function, and checks that the response status code is http.StatusOK. Finally, it deletes the test instance from the database.
- TestGetEventAvailability:This test case tests an endpoint that returns the availability of a particular computer for a given date. A test event is created with a specific date and computer identifier, and an HTTP request is created to access the endpoint with this data in the request body. The test checks that the endpoint returns the expected status code (http.StatusOK) and that the response body contains a JSON array of available times for the computer on the specified date.
- TestUpdateEvent: This test case tests by creating a new event with some fields filled in and sends a PUT request to the server to update the event. Then, it sends a GET request to retrieve the updated event and check if the available timeslots have changed according to the updated event. The test then updates the event again, this time filling in different fields, and checks if the available timeslots have been updated accordingly. The test ensures that the server is able to update events correctly and maintain the correct list of available timeslots.
      
**Middleware Handlers**
ValidateJWT - Checks that the value mapped to the "Token" key in a passed in http request is a valid JWT. Writes a response message telling the caller that they are unauthorized if the token is invalid or if there is no token at all. If the token is valid, the passed in function is allowed to execute. Endpoints which are wrapped by this handler: /api/test, /api/deactivate-account, /api/update-account, /api/admin-test, /api/change-admin-status, /api/create-event, /api/update-event, and /api/get-event.
CheckAdminState - Checks to make sure that the "Admin" key in an http header is set to true. Responds similarly to ValidateJWT in the event that it is not true. If the key is true, the function executes regularly. Endpoints which are wrapped by this handler: /api/admin-test and /api/change-admin-status.

API Endpoints:
/api/test - Calls the test function. Uses the ValidateJWT handler. Accepts http GET requests.
/api/signup - Calls the UserRegister function. No additional middleware handlers. Accepts http POST requests.
/api/login - Calls the UserLogin function. No additional middleware handlers. Accepts http POST requests.
/api/deactivate-account - Calls the DeactivateUser function. Uses the ValidateJWT handler. Accepts http DELETE requests.
/api/update-account - Calls the UpdateUser function. Uses the Validate JWT handler. Accepts http PUT requests.
/api/reset-pass - Calls the PasswordResetRequest function. Uses the Validate JWT handler. Accepts http PUT requests.
/api/reset-confirmation - Calls the PasswordResetConfirm function. Uses the Validate JWT handler. Accepts http PUT requests.
/api/admin-test - Calls the AdminTest function. Uses the Validate JWT and CheckAdminState handler. Accepts http GET requests
/api/change-admin-status - Calls the ChangeAdminState function. Uses the Validate JWT handler. Accepts http PUT requests
/api/create-event - Calls the CreateEvent function. Uses the Validate JWT handler. Accepts http POST requests.
/api/update-event - Calls the UpdateEvent function. Uses the Validate JWT handler. Accepts http PUT requests.
/api/get-event - Calls the GetEventAvailability function. Uses the Validate JWT handler. Accepts http GET requests.

main_test - Contains all of the unit tests written for the backend.

Database - SPCB.db:
    Tables:
        Users - A table containing user account details. Implements gorm.model. Primary key is set to email address. Additional fields include: firstname, lastname, password, is_admin, and verification code.
        ComputerEvents - A table containing PC renting event details. Implements gorm.model. Primary key is default. Additional fields include: date, compident, and time fields prefixed T followed by the military time equivalent of the time block (e.g. T8 indicates the 8:00am to 9:00am block and T13 indicates the 1:00pm to 2:00pm block)
